#!/bin/sh

echo "-----> Compiling C++ application"

BUILD_DIR=$1
CACHE_DIR=$2
echo $BUILD_DIR
echo $CACHE_DIR
pwd

[ -d "/app" ] && echo "Directory /app exists."

# Download and install dependencies, e.g., Boost
# Clone any required repositories
# Compile your C++ code

# Install Boost
mkdir -p $BUILD_DIR/.apt/usr/bin/boost_1_78_0

wget https://boostorg.jfrog.io/artifactory/main/release/1.78.0/source/boost_1_78_0.tar.gz
tar xf boost_1_78_0.tar.gz -C $BUILD_DIR/.apt/usr/bin/boost_1_78_0
export BOOST_ROOT=$BUILD_DIR/.apt/usr/bin/boost_1_78_0

# Clone the metall repository
git clone https://github.com/LLNL/metall $BUILD_DIR/metall
export METALL_INCLUDE=$BUILD_DIR/metall/include



# Clean up or any other necessary steps

echo "-----> Done compiling"
